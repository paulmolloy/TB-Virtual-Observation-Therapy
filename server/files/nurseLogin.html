<!DOCTYPE html>
<html>

<head>
    <title>Nurse Login</title>
    <style>
      @font-face {
        font-family: roboto;
        src: url(Roboto-Regular.ttf);
      }
      html {
        min-height: 100%;
      }
      body{
        background: -webkit-linear-gradient(#008577, #80fff2);
        background: -o-linear-gradient(#008577, #80fff2);
        background: -moz-linear-gradient(#008577, #80fff2);
        background: linear-gradient(#008577, #80fff2);
        background-color: #93B874;
        font-family: roboto;
      }
      h1{
        text-align:left;
      }
      label{
        display: inline-block;
        float: left;
        clear: left;
        width: 100px;
        text-align: left;
      }
      </style>
      <script src="https://www.gstatic.com/firebasejs/5.8.6/firebase.js"></script>
      <script src="https://www.gstatic.com/firebasejs/5.8.5/firebase-app.js"></script>
      <script src="https://www.gstatic.com/firebasejs/5.8.6/firebase-auth.js"></script>
      <script src="https://www.gstatic.com/firebasejs/5.8.6/firebase-database.js"></script>
      <script src="https://www.gstatic.com/firebasejs/5.8.6/firebase-firestore.js"></script>
      <script src="https://www.gstatic.com/firebasejs/5.8.6/firebase-messaging.js"></script>
      <script src="https://www.gstatic.com/firebasejs/5.8.6/firebase-functions.js"></script>
      <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyAgQbVptjsQH0p-4YgJtaCWIQtXaS_SyhE",
        authDomain: "tb-vot.firebaseapp.com",
        databaseURL: "https://tb-vot.firebaseio.com",
        projectId: "tb-vot",
        storageBucket: "tb-vot.appspot.com",
        messagingSenderId: "80680232908"
      };
      firebase.initializeApp(config);
      </script>

</head>

<body>
  <h1><font size=5 color=#ffffff >TaBlet Tracker - Login</font></h1>
    <form action="/nurseLogin" method="post">
        <div><font size=3 color=#ffffff >
          <label for="email">E-mail:</label></font> <input type="email" id="email" name="nurse_mail">
        </div>
        <div><font size=3 color=#ffffff >
          <label for="password">Password:</label></font> <input type="password" id="password" name="nurse_password">
        </div>
        <div class="button">
          <input type="button" name="signin" value="Sign in" onclick= "signIn()" >
        </div>
        <p id="message" ></p>
    </form>
</body>

<script>

function getInputsText(id){
    return document.getElementById(id).value
}

function setMessage(message){
    document.getElementById("message").textContent = message
}

function redirect(){
    setMessage("Redirecting... ")
    const url = (new URLSearchParams(window.location.search)).get("redirect")
    window.location.replace(url)
}

function signIn(){

    var email = getInputsText("email")
    var password = getInputsText("password")

   setMessage("Signing in...")

    firebase.auth().signInWithEmailAndPassword(email, password)
        .then(() => redirect())
        .catch(error => setMessage("Something went wrong: " + error.message))

}

</script>

</html>
